<div class="website-frame-container">
  <mat-card class="website-card" [class.fullscreen]="isFullScreen" (click)="onCardClick()">
    <mat-card-header>
      <div class="website-header">
        <span class="website-title">{{ website.name }}</span>
        <button mat-icon-button (click)="refreshWebsite(); $event.stopPropagation()" aria-label="Refresh website">
          <mat-icon>refresh</mat-icon>
        </button>
      </div>
    </mat-card-header>
    
    <mat-card-content class="frame-content">
      <mat-progress-bar *ngIf="loading" mode="indeterminate"></mat-progress-bar>
      <div class="iframe-container" 
           [class.loading]="loading" 
           [class.fullscreen-iframe-fix]="isFullScreen"
           [class.fullscreen-active]="isFullScreen">
        <iframe #frame [src]="safeUrl" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      </div>
    </mat-card-content>
    
    <div class="refresh-progress-container">
      <mat-progress-bar mode="determinate" [value]="refreshProgress"></mat-progress-bar>
      <div class="refresh-info">
        <span>Next refresh in: {{ timeLeftDisplay }}</span>
      </div>
    </div>
  </mat-card>
</div>
